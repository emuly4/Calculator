<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LUFA Library - Printer Class Bootloader: BootloaderPrinter.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LUFA Library - Printer Class Bootloader
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a00008.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">BootloaderPrinter.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="a00011.html">BootloaderPrinter.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a60afc7213e2c9632f48acdcf4b5213c3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00008.html#a60afc7213e2c9632f48acdcf4b5213c3">Application_Jump_Check</a> (void)</td></tr>
<tr class="separator:a60afc7213e2c9632f48acdcf4b5213c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5be682113cc73787552fda9487d5ad56"><td class="memItemLeft" align="right" valign="top">static int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00008.html#a5be682113cc73787552fda9487d5ad56">HexToDecimal</a> (const char Byte)</td></tr>
<tr class="separator:a5be682113cc73787552fda9487d5ad56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6018388472569c7aa913875effd9aa23"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00008.html#a6018388472569c7aa913875effd9aa23">FlushPageIfRequired</a> (void)</td></tr>
<tr class="separator:a6018388472569c7aa913875effd9aa23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef8d0b411cb360dfd558ef0c0687f4ab"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00008.html#aef8d0b411cb360dfd558ef0c0687f4ab">ParseIntelHEXByte</a> (const char ReadCharacter)</td></tr>
<tr class="separator:aef8d0b411cb360dfd558ef0c0687f4ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a840291bc02cba5474a4cb46a9b9566fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00008.html#a840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>
<tr class="separator:a840291bc02cba5474a4cb46a9b9566fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b2455ced7174a736a4c4ef730fa078e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00008.html#a0b2455ced7174a736a4c4ef730fa078e">SetupHardware</a> (void)</td></tr>
<tr class="separator:a0b2455ced7174a736a4c4ef730fa078e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4bb889d011ea82c5218b8d671716f51"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00008.html#ae4bb889d011ea82c5218b8d671716f51">ISR</a> (TIMER1_OVF_vect, ISR_BLOCK)</td></tr>
<tr class="separator:ae4bb889d011ea82c5218b8d671716f51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeff97648c9250a3d398bb0b74f040899"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00008.html#aeff97648c9250a3d398bb0b74f040899">EVENT_USB_Device_Connect</a> (void)</td></tr>
<tr class="separator:aeff97648c9250a3d398bb0b74f040899"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae88405d14d8d6dada9313520cb1501ec"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00008.html#ae88405d14d8d6dada9313520cb1501ec">EVENT_USB_Device_Disconnect</a> (void)</td></tr>
<tr class="separator:ae88405d14d8d6dada9313520cb1501ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a953a275884b9e33629ff6323fca05252"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00008.html#a953a275884b9e33629ff6323fca05252">EVENT_USB_Device_ConfigurationChanged</a> (void)</td></tr>
<tr class="separator:a953a275884b9e33629ff6323fca05252"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f4ce439a74a152e3c8ffda5c7dd201a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00008.html#a3f4ce439a74a152e3c8ffda5c7dd201a">EVENT_USB_Device_ControlRequest</a> (void)</td></tr>
<tr class="separator:a3f4ce439a74a152e3c8ffda5c7dd201a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a5177a79d23be515139f558abdb4627fe"><td class="memItemLeft" align="right" valign="top">USB_ClassInfo_PRNT_Device_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00008.html#a5177a79d23be515139f558abdb4627fe">TextOnly_Printer_Interface</a></td></tr>
<tr class="separator:a5177a79d23be515139f558abdb4627fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ac98f58c5e2d6535fae137a12b1da42"><td class="memItemLeft" >struct {</td></tr>
<tr class="memitem:ad007d028a3682a4e9721111403927cc1"><td class="memItemLeft" >&#160;&#160;&#160;uint8_t&#160;&#160;&#160;<a class="el" href="a00008.html#ad2dd17698503ce10a42a0652321f55bf">ParserState</a></td></tr>
<tr class="separator:ad007d028a3682a4e9721111403927cc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83eb63c797182eb72b4a840b71401050"><td class="memItemLeft" >&#160;&#160;&#160;uint8_t&#160;&#160;&#160;<a class="el" href="a00008.html#aa8616e97b7bd8af2aea817589a01d79e">PrevData</a></td></tr>
<tr class="separator:a83eb63c797182eb72b4a840b71401050"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa595d3059b96631de3769c9fc5f5051b"><td class="memItemLeft" >&#160;&#160;&#160;uint8_t&#160;&#160;&#160;<a class="el" href="a00008.html#ad5d880d07db60765900ceb8e99b8065c">Data</a></td></tr>
<tr class="separator:aa595d3059b96631de3769c9fc5f5051b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06b707092f18ed7043371fa6c9851b2f"><td class="memItemLeft" >&#160;&#160;&#160;bool&#160;&#160;&#160;<a class="el" href="a00008.html#adb7edfcf16b7363d0def48653491113b">ReadMSB</a></td></tr>
<tr class="separator:a06b707092f18ed7043371fa6c9851b2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5774a62095eb8e2eaf6a1b7da4d349f6"><td class="memItemLeft" >&#160;&#160;&#160;uint8_t&#160;&#160;&#160;<a class="el" href="a00008.html#a9ba690422a9b9bc4b03b0e5660f7852f">RecordType</a></td></tr>
<tr class="separator:a5774a62095eb8e2eaf6a1b7da4d349f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acad595551ca24de23aff491059654373"><td class="memItemLeft" >&#160;&#160;&#160;uint8_t&#160;&#160;&#160;<a class="el" href="a00008.html#a5eb7b24c47f5a0779062836b167f5f12">DataRem</a></td></tr>
<tr class="separator:acad595551ca24de23aff491059654373"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe7dd693a173785c6559322ddcc4a4a8"><td class="memItemLeft" >&#160;&#160;&#160;uint8_t&#160;&#160;&#160;<a class="el" href="a00008.html#ad98d5051c2e94669e746dd13771daac8">Checksum</a></td></tr>
<tr class="separator:abe7dd693a173785c6559322ddcc4a4a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40704720da3248b8ed8cd75b570231b5"><td class="memItemLeft" >&#160;&#160;&#160;<a class="el" href="a00011.html#a025d42a27cb18f018f293ffe27aa48d6">flashaddr_t</a>&#160;&#160;&#160;<a class="el" href="a00008.html#a316a37bc914f1e7528bc536cafd686ee">PageStartAddress</a></td></tr>
<tr class="separator:a40704720da3248b8ed8cd75b570231b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a876e082cce76cd0bc031c6d8b3becee9"><td class="memItemLeft" >&#160;&#160;&#160;<a class="el" href="a00011.html#a025d42a27cb18f018f293ffe27aa48d6">flashaddr_t</a>&#160;&#160;&#160;<a class="el" href="a00008.html#a029bb2a5cf43b850528d65b7dbed1951">CurrBaseAddress</a></td></tr>
<tr class="separator:a876e082cce76cd0bc031c6d8b3becee9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd3efedd9707cd996795a639e1b0bde2"><td class="memItemLeft" >&#160;&#160;&#160;<a class="el" href="a00011.html#a025d42a27cb18f018f293ffe27aa48d6">flashaddr_t</a>&#160;&#160;&#160;<a class="el" href="a00008.html#aeedf257eb55a634d478467379557ad04">CurrAddress</a></td></tr>
<tr class="separator:afd3efedd9707cd996795a639e1b0bde2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ac98f58c5e2d6535fae137a12b1da42"><td class="memItemLeft" valign="top">}&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00008.html#a0ac98f58c5e2d6535fae137a12b1da42">HEXParser</a></td></tr>
<tr class="separator:a0ac98f58c5e2d6535fae137a12b1da42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea78fa0ab4d246719e3d77eb9c39897d"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00008.html#aea78fa0ab4d246719e3d77eb9c39897d">PageDirty</a> = false</td></tr>
<tr class="separator:aea78fa0ab4d246719e3d77eb9c39897d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a997cfdd9124b3e2f863a83f7f7d71c35"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00008.html#a997cfdd9124b3e2f863a83f7f7d71c35">RunBootloader</a> = true</td></tr>
<tr class="separator:a997cfdd9124b3e2f863a83f7f7d71c35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad98754cd5b9bd2d564fd093c20b07e2d"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00008.html#ad98754cd5b9bd2d564fd093c20b07e2d">MagicBootKey</a></td></tr>
<tr class="separator:ad98754cd5b9bd2d564fd093c20b07e2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Main source file for the Printer class bootloader. This file contains the complete bootloader logic. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a60afc7213e2c9632f48acdcf4b5213c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60afc7213e2c9632f48acdcf4b5213c3">&#9670;&nbsp;</a></span>Application_Jump_Check()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Application_Jump_Check </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Special startup routine to check if the bootloader was started via a watchdog reset, and if the magic application start key has been loaded into <a class="el" href="a00008.html#ad98754cd5b9bd2d564fd093c20b07e2d">MagicBootKey</a>. If the bootloader started via the watchdog and the key is valid, this will force the user application to start via a software jump. </p>

</div>
</div>
<a id="a953a275884b9e33629ff6323fca05252"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a953a275884b9e33629ff6323fca05252">&#9670;&nbsp;</a></span>EVENT_USB_Device_ConfigurationChanged()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EVENT_USB_Device_ConfigurationChanged </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Event handler for the USB_ConfigurationChanged event. This is fired when the host set the current configuration of the USB device after enumeration - the device endpoints are configured and the Mass Storage management task started. </p>

</div>
</div>
<a id="aeff97648c9250a3d398bb0b74f040899"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeff97648c9250a3d398bb0b74f040899">&#9670;&nbsp;</a></span>EVENT_USB_Device_Connect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EVENT_USB_Device_Connect </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Event handler for the USB_Connect event. This indicates that the device is enumerating via the status LEDs. </p>

</div>
</div>
<a id="a3f4ce439a74a152e3c8ffda5c7dd201a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f4ce439a74a152e3c8ffda5c7dd201a">&#9670;&nbsp;</a></span>EVENT_USB_Device_ControlRequest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EVENT_USB_Device_ControlRequest </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Event handler for the USB_ControlRequest event. This is used to catch and process control requests sent to the device from the USB host before passing along unhandled control requests to the library for processing internally. </p>

</div>
</div>
<a id="ae88405d14d8d6dada9313520cb1501ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae88405d14d8d6dada9313520cb1501ec">&#9670;&nbsp;</a></span>EVENT_USB_Device_Disconnect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EVENT_USB_Device_Disconnect </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Event handler for the USB_Disconnect event. This indicates that the device is no longer connected to a host via the status LEDs and stops the Printer management task. </p>

</div>
</div>
<a id="a6018388472569c7aa913875effd9aa23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6018388472569c7aa913875effd9aa23">&#9670;&nbsp;</a></span>FlushPageIfRequired()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void FlushPageIfRequired </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Flushes a partially written page of data to physical FLASH, if a page boundary has been crossed.</p>
<dl class="section note"><dt>Note</dt><dd>If a page flush occurs the global HEX parser state is updated. </dd></dl>

</div>
</div>
<a id="a5be682113cc73787552fda9487d5ad56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5be682113cc73787552fda9487d5ad56">&#9670;&nbsp;</a></span>HexToDecimal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int8_t HexToDecimal </td>
          <td>(</td>
          <td class="paramtype">const char&#160;</td>
          <td class="paramname"><em>Byte</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Converts a given input byte of data from an ASCII encoded HEX value to an integer value.</p>
<dl class="section note"><dt>Note</dt><dd>Input HEX bytes are expected to be in uppercase only.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">Byte</td><td>ASCII byte of data to convert</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Integer converted value of the input ASCII encoded HEX byte of data, or -1 if the input is not valid ASCII encoded HEX. </dd></dl>

</div>
</div>
<a id="ae4bb889d011ea82c5218b8d671716f51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4bb889d011ea82c5218b8d671716f51">&#9670;&nbsp;</a></span>ISR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ISR </td>
          <td>(</td>
          <td class="paramtype">TIMER1_OVF_vect&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ISR_BLOCK&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ISR to periodically toggle the LEDs on the board to indicate that the bootloader is active. </p>

</div>
</div>
<a id="a840291bc02cba5474a4cb46a9b9566fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a840291bc02cba5474a4cb46a9b9566fe">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Main program entry point. This routine configures the hardware required by the application, then enters a loop to run the application tasks in sequence. </p>

</div>
</div>
<a id="aef8d0b411cb360dfd558ef0c0687f4ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef8d0b411cb360dfd558ef0c0687f4ab">&#9670;&nbsp;</a></span>ParseIntelHEXByte()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ParseIntelHEXByte </td>
          <td>(</td>
          <td class="paramtype">const char&#160;</td>
          <td class="paramname"><em>ReadCharacter</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Parses an input Intel HEX formatted stream one character at a time, loading the data contents into the device's internal FLASH memory.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ReadCharacter</td><td>Next input ASCII byte of data to parse </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0b2455ced7174a736a4c4ef730fa078e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b2455ced7174a736a4c4ef730fa078e">&#9670;&nbsp;</a></span>SetupHardware()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void SetupHardware </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Configures the board hardware and chip peripherals for the demo's functionality. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ad98d5051c2e94669e746dd13771daac8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad98d5051c2e94669e746dd13771daac8">&#9670;&nbsp;</a></span>Checksum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t Checksum</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Checksum of the current record received so far. </p>

</div>
</div>
<a id="aeedf257eb55a634d478467379557ad04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeedf257eb55a634d478467379557ad04">&#9670;&nbsp;</a></span>CurrAddress</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00011.html#a025d42a27cb18f018f293ffe27aa48d6">flashaddr_t</a> CurrAddress</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Current 32-bit byte address in FLASH being targeted. </p>

</div>
</div>
<a id="a029bb2a5cf43b850528d65b7dbed1951"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a029bb2a5cf43b850528d65b7dbed1951">&#9670;&nbsp;</a></span>CurrBaseAddress</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00011.html#a025d42a27cb18f018f293ffe27aa48d6">flashaddr_t</a> CurrBaseAddress</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Current 32-bit byte extended base address in FLASH being targeted. </p>

</div>
</div>
<a id="ad5d880d07db60765900ceb8e99b8065c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5d880d07db60765900ceb8e99b8065c">&#9670;&nbsp;</a></span>Data</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t Data</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Currently decoded numerical byte of data. </p>

</div>
</div>
<a id="a5eb7b24c47f5a0779062836b167f5f12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5eb7b24c47f5a0779062836b167f5f12">&#9670;&nbsp;</a></span>DataRem</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t DataRem</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Numerical bytes of data remaining to be read in the current record. </p>

</div>
</div>
<a id="a0ac98f58c5e2d6535fae137a12b1da42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ac98f58c5e2d6535fae137a12b1da42">&#9670;&nbsp;</a></span>HEXParser</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct { ... }   HEXParser</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Intel HEX parser state machine state information, to track the contents of a HEX file streamed in as a sequence of arbitrary bytes. </p>

</div>
</div>
<a id="ad98754cd5b9bd2d564fd093c20b07e2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad98754cd5b9bd2d564fd093c20b07e2d">&#9670;&nbsp;</a></span>MagicBootKey</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t MagicBootKey</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Magic lock for forced application start. If the HWBE fuse is programmed and BOOTRST is unprogrammed, the bootloader will start if the /HWB line of the AVR is held low and the system is reset. However, if the /HWB line is still held low when the application attempts to start via a watchdog reset, the bootloader will re-start. If set to the value <a class="el" href="a00011.html#a77b3cb845202cca18b5ed20ff89b4a7e">MAGIC_BOOT_KEY</a> the special init function <a class="el" href="a00008.html#a60afc7213e2c9632f48acdcf4b5213c3">Application_Jump_Check()</a> will force the application to start. </p>

</div>
</div>
<a id="aea78fa0ab4d246719e3d77eb9c39897d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea78fa0ab4d246719e3d77eb9c39897d">&#9670;&nbsp;</a></span>PageDirty</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool PageDirty = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Indicates if there is data waiting to be written to a physical page of memory in FLASH. </p>

</div>
</div>
<a id="a316a37bc914f1e7528bc536cafd686ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a316a37bc914f1e7528bc536cafd686ee">&#9670;&nbsp;</a></span>PageStartAddress</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00011.html#a025d42a27cb18f018f293ffe27aa48d6">flashaddr_t</a> PageStartAddress</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Starting address of the last addressed FLASH page. </p>

</div>
</div>
<a id="ad2dd17698503ce10a42a0652321f55bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2dd17698503ce10a42a0652321f55bf">&#9670;&nbsp;</a></span>ParserState</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ParserState</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Current HEX parser state machine state. </p>

</div>
</div>
<a id="aa8616e97b7bd8af2aea817589a01d79e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8616e97b7bd8af2aea817589a01d79e">&#9670;&nbsp;</a></span>PrevData</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t PrevData</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Previously decoded numerical byte of data. </p>

</div>
</div>
<a id="adb7edfcf16b7363d0def48653491113b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb7edfcf16b7363d0def48653491113b">&#9670;&nbsp;</a></span>ReadMSB</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ReadMSB</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Indicates if both bytes that correspond to a single decoded numerical byte of data (HEX encodes values in ASCII HEX, two characters per byte) have been read. </p>

</div>
</div>
<a id="a9ba690422a9b9bc4b03b0e5660f7852f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ba690422a9b9bc4b03b0e5660f7852f">&#9670;&nbsp;</a></span>RecordType</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t RecordType</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Intel HEX record type of the current Intel HEX record. </p>

</div>
</div>
<a id="a997cfdd9124b3e2f863a83f7f7d71c35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a997cfdd9124b3e2f863a83f7f7d71c35">&#9670;&nbsp;</a></span>RunBootloader</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool RunBootloader = true</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Flag to indicate if the bootloader should be running, or should exit and allow the application code to run via a soft reset. When cleared, the bootloader will abort, the USB interface will shut down and the application started via a forced watchdog reset. </p>

</div>
</div>
<a id="a5177a79d23be515139f558abdb4627fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5177a79d23be515139f558abdb4627fe">&#9670;&nbsp;</a></span>TextOnly_Printer_Interface</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">USB_ClassInfo_PRNT_Device_t TextOnly_Printer_Interface</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div><div class="line">    {</div><div class="line">        .Config =</div><div class="line">            {</div><div class="line">                .InterfaceNumber          = <a class="code" href="a00023.html#ab083ca8c92e1a34d1952524ae96df991a8f19d89803523da7b23e378923d0b429">INTERFACE_ID_Printer</a>,</div><div class="line">                .DataINEndpoint           =</div><div class="line">                    {</div><div class="line">                        .Address          = <a class="code" href="a00023.html#a53cf4f95e3f80baaa85b5270e00f35a5">PRINTER_IN_EPADDR</a>,</div><div class="line">                        .Size             = <a class="code" href="a00023.html#a488f886116e5d596a319b3dafde3c019">PRINTER_IO_EPSIZE</a>,</div><div class="line">                        .Banks            = 1,</div><div class="line">                    },</div><div class="line">                .DataOUTEndpoint =</div><div class="line">                    {</div><div class="line">                        .Address          = <a class="code" href="a00023.html#a089ce471c91db3c919f09b42f7c84543">PRINTER_OUT_EPADDR</a>,</div><div class="line">                        .Size             = <a class="code" href="a00023.html#a488f886116e5d596a319b3dafde3c019">PRINTER_IO_EPSIZE</a>,</div><div class="line">                        .Banks            = 1,</div><div class="line">                    },</div><div class="line">                .IEEE1284String =</div><div class="line">                    <span class="stringliteral">&quot;MFG:Generic;&quot;</span></div><div class="line">                    <span class="stringliteral">&quot;MDL:Generic_/_Text_Only;&quot;</span></div><div class="line">                    <span class="stringliteral">&quot;CMD:1284.4;&quot;</span></div><div class="line">                    <span class="stringliteral">&quot;CLS:PRINTER&quot;</span>,</div><div class="line">            },</div><div class="line">    }</div><div class="ttc" id="a00023_html_ab083ca8c92e1a34d1952524ae96df991a8f19d89803523da7b23e378923d0b429"><div class="ttname"><a href="a00023.html#ab083ca8c92e1a34d1952524ae96df991a8f19d89803523da7b23e378923d0b429">INTERFACE_ID_Printer</a></div><div class="ttdef"><b>Definition:</b> Descriptors.h:75</div></div>
<div class="ttc" id="a00023_html_a488f886116e5d596a319b3dafde3c019"><div class="ttname"><a href="a00023.html#a488f886116e5d596a319b3dafde3c019">PRINTER_IO_EPSIZE</a></div><div class="ttdeci">#define PRINTER_IO_EPSIZE</div><div class="ttdef"><b>Definition:</b> Descriptors.h:52</div></div>
<div class="ttc" id="a00023_html_a53cf4f95e3f80baaa85b5270e00f35a5"><div class="ttname"><a href="a00023.html#a53cf4f95e3f80baaa85b5270e00f35a5">PRINTER_IN_EPADDR</a></div><div class="ttdeci">#define PRINTER_IN_EPADDR</div><div class="ttdef"><b>Definition:</b> Descriptors.h:46</div></div>
<div class="ttc" id="a00023_html_a089ce471c91db3c919f09b42f7c84543"><div class="ttname"><a href="a00023.html#a089ce471c91db3c919f09b42f7c84543">PRINTER_OUT_EPADDR</a></div><div class="ttdeci">#define PRINTER_OUT_EPADDR</div><div class="ttdef"><b>Definition:</b> Descriptors.h:49</div></div>
</div><!-- fragment --><p>LUFA Printer Class driver interface configuration and state information. This structure is passed to all Printer Class driver functions, so that multiple instances of the same class within a device can be differentiated from one another. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="a00008.html">BootloaderPrinter.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
