<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LUFA Library - Keyboard Device Demo: Keyboard.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LUFA Library - Keyboard Device Demo
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a00011.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Keyboard.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="a00014.html">Keyboard.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a840291bc02cba5474a4cb46a9b9566fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#a840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>
<tr class="separator:a840291bc02cba5474a4cb46a9b9566fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb27e569c06a2797c5fd58ed39147448"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#acb27e569c06a2797c5fd58ed39147448">SetupHardware</a> (void)</td></tr>
<tr class="separator:acb27e569c06a2797c5fd58ed39147448"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeff97648c9250a3d398bb0b74f040899"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#aeff97648c9250a3d398bb0b74f040899">EVENT_USB_Device_Connect</a> (void)</td></tr>
<tr class="separator:aeff97648c9250a3d398bb0b74f040899"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae88405d14d8d6dada9313520cb1501ec"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#ae88405d14d8d6dada9313520cb1501ec">EVENT_USB_Device_Disconnect</a> (void)</td></tr>
<tr class="separator:ae88405d14d8d6dada9313520cb1501ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a953a275884b9e33629ff6323fca05252"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#a953a275884b9e33629ff6323fca05252">EVENT_USB_Device_ConfigurationChanged</a> (void)</td></tr>
<tr class="separator:a953a275884b9e33629ff6323fca05252"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f4ce439a74a152e3c8ffda5c7dd201a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#a3f4ce439a74a152e3c8ffda5c7dd201a">EVENT_USB_Device_ControlRequest</a> (void)</td></tr>
<tr class="separator:a3f4ce439a74a152e3c8ffda5c7dd201a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3ebb4fd4403f463b300b745d8485b65"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#aa3ebb4fd4403f463b300b745d8485b65">EVENT_USB_Device_StartOfFrame</a> (void)</td></tr>
<tr class="separator:aa3ebb4fd4403f463b300b745d8485b65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cc2a87828229d5475d62d5c3ffd740f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#a6cc2a87828229d5475d62d5c3ffd740f">CreateKeyboardReport</a> (USB_KeyboardReport_Data_t *const ReportData)</td></tr>
<tr class="separator:a6cc2a87828229d5475d62d5c3ffd740f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36d4c69b6c4159d4f743db195e4832ca"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#a36d4c69b6c4159d4f743db195e4832ca">ProcessLEDReport</a> (const uint8_t LEDReport)</td></tr>
<tr class="separator:a36d4c69b6c4159d4f743db195e4832ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0b6e022c7a58a69649e525fc5ace0ed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#ae0b6e022c7a58a69649e525fc5ace0ed">SendNextReport</a> (void)</td></tr>
<tr class="separator:ae0b6e022c7a58a69649e525fc5ace0ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7168ef8ff055e72b600bb13ddea1a1f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#ab7168ef8ff055e72b600bb13ddea1a1f">ReceiveNextReport</a> (void)</td></tr>
<tr class="separator:ab7168ef8ff055e72b600bb13ddea1a1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f9c85184db121fa698d6fae1029fb10"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#a2f9c85184db121fa698d6fae1029fb10">HID_Task</a> (void)</td></tr>
<tr class="separator:a2f9c85184db121fa698d6fae1029fb10"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a0c4cb9082d61112cc8981b9eef89160a"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#a0c4cb9082d61112cc8981b9eef89160a">UsingReportProtocol</a> = true</td></tr>
<tr class="separator:a0c4cb9082d61112cc8981b9eef89160a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af14325c5d2a62208bae4e5ef69916701"><td class="memItemLeft" align="right" valign="top">static uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#af14325c5d2a62208bae4e5ef69916701">IdleCount</a> = 500</td></tr>
<tr class="separator:af14325c5d2a62208bae4e5ef69916701"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28bde9feb9693d2a456f25617b1d8347"><td class="memItemLeft" align="right" valign="top">static uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00011.html#a28bde9feb9693d2a456f25617b1d8347">IdleMSRemaining</a> = 0</td></tr>
<tr class="separator:a28bde9feb9693d2a456f25617b1d8347"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Main source file for the Keyboard demo. This file contains the main tasks of the demo and is responsible for the initial application hardware configuration. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a6cc2a87828229d5475d62d5c3ffd740f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cc2a87828229d5475d62d5c3ffd740f">&#9670;&nbsp;</a></span>CreateKeyboardReport()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CreateKeyboardReport </td>
          <td>(</td>
          <td class="paramtype">USB_KeyboardReport_Data_t *const&#160;</td>
          <td class="paramname"><em>ReportData</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Fills the given HID report data structure with the next HID report to send to the host.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">ReportData</td><td>Pointer to a HID report data structure to be filled </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a953a275884b9e33629ff6323fca05252"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a953a275884b9e33629ff6323fca05252">&#9670;&nbsp;</a></span>EVENT_USB_Device_ConfigurationChanged()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EVENT_USB_Device_ConfigurationChanged </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Event handler for the USB_ConfigurationChanged event. This is fired when the host sets the current configuration of the USB device after enumeration, and configures the keyboard device endpoints. </p>

</div>
</div>
<a id="aeff97648c9250a3d398bb0b74f040899"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeff97648c9250a3d398bb0b74f040899">&#9670;&nbsp;</a></span>EVENT_USB_Device_Connect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EVENT_USB_Device_Connect </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Event handler for the USB_Connect event. This indicates that the device is enumerating via the status LEDs and starts the library USB task to begin the enumeration and USB management process. </p>

</div>
</div>
<a id="a3f4ce439a74a152e3c8ffda5c7dd201a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f4ce439a74a152e3c8ffda5c7dd201a">&#9670;&nbsp;</a></span>EVENT_USB_Device_ControlRequest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EVENT_USB_Device_ControlRequest </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Event handler for the USB_ControlRequest event. This is used to catch and process control requests sent to the device from the USB host before passing along unhandled control requests to the library for processing internally. </p>

</div>
</div>
<a id="ae88405d14d8d6dada9313520cb1501ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae88405d14d8d6dada9313520cb1501ec">&#9670;&nbsp;</a></span>EVENT_USB_Device_Disconnect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EVENT_USB_Device_Disconnect </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Event handler for the USB_Disconnect event. This indicates that the device is no longer connected to a host via the status LEDs. </p>

</div>
</div>
<a id="aa3ebb4fd4403f463b300b745d8485b65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3ebb4fd4403f463b300b745d8485b65">&#9670;&nbsp;</a></span>EVENT_USB_Device_StartOfFrame()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EVENT_USB_Device_StartOfFrame </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Event handler for the USB device Start Of Frame event. </p>

</div>
</div>
<a id="a2f9c85184db121fa698d6fae1029fb10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f9c85184db121fa698d6fae1029fb10">&#9670;&nbsp;</a></span>HID_Task()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HID_Task </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Function to manage HID report generation and transmission to the host, when in report mode. </p>

</div>
</div>
<a id="a840291bc02cba5474a4cb46a9b9566fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a840291bc02cba5474a4cb46a9b9566fe">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Main program entry point. This routine configures the hardware required by the application, then enters a loop to run the application tasks in sequence. </p>

</div>
</div>
<a id="a36d4c69b6c4159d4f743db195e4832ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36d4c69b6c4159d4f743db195e4832ca">&#9670;&nbsp;</a></span>ProcessLEDReport()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ProcessLEDReport </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>LEDReport</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Processes a received LED report, and updates the board LEDs states to match.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">LEDReport</td><td>LED status report from the host </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab7168ef8ff055e72b600bb13ddea1a1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7168ef8ff055e72b600bb13ddea1a1f">&#9670;&nbsp;</a></span>ReceiveNextReport()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ReceiveNextReport </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads the next LED status report from the host from the LED data endpoint, if one has been sent. </p>

</div>
</div>
<a id="ae0b6e022c7a58a69649e525fc5ace0ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0b6e022c7a58a69649e525fc5ace0ed">&#9670;&nbsp;</a></span>SendNextReport()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SendNextReport </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sends the next HID report to the host, via the keyboard data endpoint. </p>

</div>
</div>
<a id="acb27e569c06a2797c5fd58ed39147448"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb27e569c06a2797c5fd58ed39147448">&#9670;&nbsp;</a></span>SetupHardware()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SetupHardware </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Configures the board hardware and chip peripherals for the demo's functionality. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="af14325c5d2a62208bae4e5ef69916701"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af14325c5d2a62208bae4e5ef69916701">&#9670;&nbsp;</a></span>IdleCount</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t IdleCount = 500</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Current Idle period. This is set by the host via a Set Idle HID class request to silence the device's reports for either the entire idle duration, or until the report status changes (e.g. the user presses a key). </p>

</div>
</div>
<a id="a28bde9feb9693d2a456f25617b1d8347"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28bde9feb9693d2a456f25617b1d8347">&#9670;&nbsp;</a></span>IdleMSRemaining</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t IdleMSRemaining = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Current Idle period remaining. When the IdleCount value is set, this tracks the remaining number of idle milliseconds. This is separate to the IdleCount timer and is incremented and compared as the host may request the current idle period via a Get Idle HID class request, thus its value must be preserved. </p>

</div>
</div>
<a id="a0c4cb9082d61112cc8981b9eef89160a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c4cb9082d61112cc8981b9eef89160a">&#9670;&nbsp;</a></span>UsingReportProtocol</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool UsingReportProtocol = true</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Indicates what report mode the host has requested, true for normal HID reporting mode, <code>false</code> for special boot protocol reporting mode. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="a00011.html">Keyboard.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
